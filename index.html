<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ejemplos de accesibilidad</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.13.1/font/bootstrap-icons.min.css">
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <a href="#main"
        class="btn btn-primary position-fixed top-0 start-50 translate-middle-x mt-4 visually-hidden-focusable">Saltar
        al contenido principal</a>
    <div id="header" class="sticky-top"></div>
    <main id="main" class="py-5 text-bg-light">
        <div class="container">
            <div class="row row-cols-1 row-cols-xl-2 g-5">
                <div class="col col-xl-9 vstack gap-3">
                    <h1 class="display-5 border-bottom pb-3">Ejemplo de rótulos y cuadros emergentes</h1>
                    <p>Unos de los elementos más socorridos para proporcionar información adicional, mejorando la
                        usabilidad y la eficiencia sin saturar la interfaz, son los <strong>rótulos (tooltips)</strong>
                        y los <strong>cuadros emergentes (popovers)</strong>. Los primeros son mensajes breves que
                        aparecen al pasar el cursor o al enfocarse un elemento. Útiles para aclaraciones rápidas,
                        siglas, atajos de teclado o detalles contextuales. Los segundos son cuadros más grandes que
                        pueden contener títulos, varias líneas de texto, listas, u otros contenidos. Son útiles para
                        instrucciones detalladas, información contextual más rica o acciones relacionadas (p. ej.,
                        elegir opciones, ver detalles de un ítem).</p>

                    <h2 class="border-bottom pb-3"><i class="bi bi-universal-access-circle"></i> Problemas de
                        accesibilidad más frecuentes</h2>
                    <dl>
                        <dt>Acceso solo por ratón (mouse)</dt>
                        <dd>Muchos tooltips solo se muestran con hover. Usuarios de teclado no pueden activarlos si no
                            están diseñados para foco.</dd>
                        <dt>Anunciación por tecnologías de asistencia insuficiente</dt>
                        <dd>Falta de roles, atributos aria adecuados, o textos no legibles por lectores de pantalla.
                        </dd>
                        <dt>Problemas de temporización</dt>
                        <dd>Tooltips que permanecen demasiado breve o se muestran/ocultan sin control predictible,
                            dificultando su lectura por usuarios de lectura en pantalla.</dd>
                        <dt>Cierre inaccesible</dt>
                        <dd>No hay forma clara de cerrar el popover (teclas, clic fuera, o escape) para usuarios que no
                            usan ratón.</dd>
                        <dt>Lectura dependiente del contenido</dt>
                        <dd>Contenido del tooltip que no es relevante para todos los usuarios</dd>
                    </dl>

                    <h2 class="border-bottom pb-3"><i class="bi bi-ui-checks"></i> Mejores prácticas para mejorar la
                        accesibilidad</h2>
                    <h3 class="h4 fw-bold">Soporte de teclado</h3>
                    <ul>
                        <li>Activa el <strong>tooltip</strong> con <code>:focus</code> (tecla <kbd>Tab</kbd>), no solo
                            con <code>:hover</code>, y con teclado usa <kbd>Esc</kbd> para cerrarlo.
                        </li>
                        <li>En el caso del <strong>popover</strong> evita que la apertura se base únicamente en
                            <code>:hover</code> o <code>:focus</code>, asegúrate de que el control que lo abre reciba
                            foco y se active haciendo 'click' o con teclado (Enter/Space para activar, Esc para cerrar).
                        </li>
                    </ul>
                    <h3 class="h4 fw-bold">Roles y atributos ARIA adecuados</h3>
                    <ul>
                        <li>
                            <strong>Tooltip:</strong>
                            <ul>
                                <li>Usa <code>role="tooltip"</code> en el contenedor.</li>
                                <li>Oculta el tooltip a lectores de pantalla usando <code>aria-hidden="true"</code>.
                                </li>
                                <li>Incluye en el disparador el texto accesible equivalente (<code>aria-label</code> o
                                    <code>aria-description</code>) si no lo tiene ya como texto real o como texto
                                    alternativo si se trata de una imagen.
                                </li>
                                <li>Asegurar que cierra con <kbd>Esc</kbd>.</li>
                            </ul>
                        </li>
                        <li>
                            <strong>Popover:</strong>
                            <ul>
                                <li>Si es contenido informativo sin interacción usar <code>role="status"</code> en el
                                    contenedor para que el lector de pantalla lo detecte al abrirse.</li>
                                <li>Oculta el popover a lectores de pantalla usando <code>aria-hidden="true"</code> ya
                                    que solo queremos quese lea una vez, con la interacción.
                                </li>
                                <li>El disparador es un conmutador lo que implica incluir la propiedad
                                    <code>aria-pressed</code> y controlar su valor dinámicamente.
                                </li>
                                <li>Asegurar que cierra con <kbd>Esc</kbd>.</li>
                            </ul>
                        </li>
                    </ul>

                    <h2 class="border-bottom pb-3"><i class="bi bi-grid-1x2-fill"></i> Ejemplos de uso</h2>
                    <div class="row row-cols-1 row-cols-md-2 g-4 mb-4">
                        <div class="col">
                            <div class="card h-100">
                                <div class="card-header text-body-secondary">
                                    <h2 class="card-title h5 mb-0">Tooltip</h2>
                                </div>
                                <div class="card-body">
                                    <p class="card-text">Un <strong>rótulo (tooltip)</strong> es una ventana que muestra
                                        información relacionada con un elemento cuando este recibe el foco del teclado o
                                        el ratón se sitúa sobre él. Normalmente aparece después de un pequeño retardo y
                                        desaparece al pulsar la tecla <kbd>Escape</kbd> o al retirar el ratón. Es
                                        exclusivamente visual, la información equivalente para el lector de pantalla
                                        consta en el texto accesible (<code>aria-label</code> o
                                        <code>aria-description</code>) del elemento activador.
                                    </p>
                                </div>
                                <div class="card-footer text-body-secondary p-3">
                                    <div class="bg-white border border-2 rounded-2">
                                        <nav class="navbar bg-body-tertiary">
                                            <div class="container-fluid px-3">
                                                <a class="navbar-brand" href="#">Logotipo</a>
                                                <button type="button"
                                                    class="btn btn-light lh-1 p-3 my-n2 me-n3 rounded-0 border-0 position-relative"
                                                    title="Notificaciones"><i class="bi bi-bell-fill fs-4" role="img"
                                                        aria-label="Notificaciones"></i>
                                                    <span
                                                        class="position-absolute top-0 end-0 m-1 badge rounded-pill bg-danger">
                                                        3 <span class="visually-hidden">sin leer</span>
                                                    </span>
                                                </button>
                                            </div>
                                        </nav>
                                        <div class="container-fluid py-2">
                                            <p>Lorem ipsum dolor sit, amet consectetur adipisicing elit. Temporibus
                                                expedita sint unde non rerum. Voluptas iusto vero similique beatae
                                                dolores necessitatibus cupiditate, temporibus dolorum iste labore!
                                                Veniam inventore earum quibusdam.</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col">
                            <div class="card h-100">
                                <div class="card-header text-body-secondary">
                                    <h2 class="card-title h5 mb-0">Popover</h2>
                                </div>
                                <div class="card-body">
                                    <p class="card-text">En cambio, un <strong>cuadro de información emergente
                                            (popover)</strong> es una ventana que muestra información adicional sobre
                                        cualquier aspecto del contenido cercano al elemento que lo activa. Al activar
                                        dicho elemento aparecerá la información y permanecerá visible hasta activarlo de
                                        nuevo, activar otro elemento, hacer 'click' fuera o al pulsar la tecla
                                        <kbd>Escape</kbd>.
                                    </p>
                                </div>
                                <div class="card-footer text-body-secondary p-3">
                                    <form>
                                        <div class="mb-3">
                                            <label for="exampleInputEmail1" class="form-label">Correo
                                                electrónico</label>
                                            <input type="email" class="form-control" id="exampleInputEmail1"
                                                aria-describedby="emailHelp">
                                            <div id="emailHelp" class="form-text">Nunca compartiremos tu email con
                                                nadie.</div>
                                        </div>
                                        <div class="mb-3">
                                            <label for="exampleInputSubject1" class="form-label">Asunto</label>
                                            <input type="text" class="form-control" id="exampleInputSubject1">
                                        </div>
                                        <div class="mb-3">
                                            <label for="exampleTextareaMessage1" class="form-label">Mensaje</label>
                                            <textarea class="form-control" id="exampleTextareaMessage1"></textarea>
                                        </div>
                                        <div class="mb-3 form-check">
                                            <div class="hstack gap-2">
                                                <input type="checkbox" class="form-check-input" id="exampleCheck1">
                                                <label class="form-check-label" for="exampleCheck1">Política de
                                                    privacidad</label>
                                                <button type="button"
                                                    class="btn btn-link link-dark p-1 lh-1 rounded-circle position-relative"
                                                    aria-pressed="false"
                                                    data-popover="Lorem ipsum dolor sit amet consectetur adipisicing elit. Iste dolore quaerat id aliquam, est architecto culpa illum explicabo sapiente reiciendis impedit molestiae libero adipisci autem vitae? Cupiditate vel dicta expedita?">
                                                    <i class="bi bi-info-circle-fill fs-5" role="img"
                                                        aria-label="Más información sobre..."></i>
                                                </button>
                                            </div>
                                        </div>
                                        <button type="submit" class="btn btn-primary">Enviar</button>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>

                    <h2 class="border-bottom pb-3"><i class="bi bi-code-square"></i> Código generado</h2>
                    <h3 class="h4 fw-bold">Tooltip</h3>
                    <div class="vstack gap-3">
                        <div class="card h-100 overflow-hidden">
                            <div class="card-header">
                                <h4 class="card-title h5 mb-0">HTML</h4>
                            </div>
                            <pre class="card-body text-bg-dark mh-15 mb-0">
&lt;button type="button"
    class="btn btn-light lh-1 p-3 my-n2 me-n3 rounded-0 border-0 position-relative"
    title="Notificaciones"&gt;&lt;i class="bi bi-bell-fill fs-4" role="img"
        aria-label="Notificaciones"&gt;&lt;/i&gt;
    &lt;span
        class="position-absolute top-0 end-0 m-1 badge rounded-pill bg-danger"&gt;
        3 &lt;span class="visually-hidden"&gt;sin leer&lt;/span&gt;
    &lt;/span&gt;
&lt;/button&gt;</pre>
                        </div>
                        <div class="card h-100 overflow-hidden">
                            <div class="card-header">
                                <h4 class="card-title h5 mb-0">CSS</h4>
                            </div>
                            <pre class="card-body text-bg-dark mh-15 mb-0">
.tooltip-container [role="tooltip"] {
    display: none;
    position: absolute;
    left: 100%;
    top: 50%;
    transform: translateY(-50%);
    font-size: 0.9rem;
    width: max-content;
    max-width: 12.5em;
    margin-left: 0.2rem;
    z-index: 1;
}

.tooltip-container [role="tooltip"] span {
    display: block;
    padding: 0.25rem 0.5rem;
    background: #000;
    color: #fff;
    border-radius: 0.25rem;
    box-shadow: 0 0 3px 0 #00000066;
}

.tooltip-container [role="tooltip"]::before,
.tooltip-container [role="tooltip"]::after {
    content: '';
    display: block;
    width: 0;
    height: 0;
    position: absolute;
    right: 100%;
    top: 50%;
    border: 0.25rem solid #000;
    transform: translate(50%, -50%) rotate(45deg);
}

.tooltip-container [role="tooltip"]::after {
    box-shadow: 0 0 3px 0 #00000066;
    z-index: -1;
}

.tooltip-container {
    display: inline-block;
    position: relative;
}

.tooltip-container.hover:hover>[role="tooltip"],
.tooltip-container>.focused:focus+[role="tooltip"] {
    display: inline-block;
}</pre>
                        </div>
                        <div class="card h-100 overflow-hidden">
                            <div class="card-header">
                                <h4 class="card-title h5 mb-0">JS</h4>
                            </div>
                            <pre class="card-body text-bg-dark mh-15 mb-0">
// Iterate over them
Array.from(document.querySelectorAll('[title]')).forEach((el) => {
    // Get the message from the data-content element
    var tooltipContainer = document.createElement('span');
    tooltipContainer.classList.add('tooltip-container');

    el.after(tooltipContainer);
    tooltipContainer.append(el);
    tooltipContainer.innerHTML += '<span role="tooltip" aria-hidden="true"><span>' + el.getAttribute('title') + '</span></span>';
    el = tooltipContainer.querySelector('[title]');
    el.removeAttribute('title');

    // Toggle the message
    tooltipContainer.addEventListener('mouseover', function (e) {
        tooltipContainer.classList.add('hover');
    });

    tooltipContainer.addEventListener('mouseleave', function (e) {
        tooltipContainer.classList.remove('hover');
    });

    // Close on outside
    el.addEventListener('focus', function (e) {
        el.classList.add('focused');
    });

    el.addEventListener('blur', function (e) {
        el.classList.remove('focused');
    });

    // Remove tooltip on ESC
    document.addEventListener('keydown', function (e) {
        if ((e.keyCode || e.which) === 27) {
            tooltipContainer.classList.remove('hover');
            el.classList.remove('focused');
        }
    });
});</pre>
                        </div>
                    </div>
                    <h3 class="h4 fw-bold">Popover</h3>
                    <div class="vstack gap-3">
                        <div class="card h-100 overflow-hidden">
                            <div class="card-header">
                                <h4 class="card-title h5 mb-0">HTML</h4>
                            </div>
                            <pre class="card-body text-bg-dark mh-15 mb-0">
&lt;button type="button"
    class="btn btn-link link-dark p-1 lh-1 rounded-circle position-relative"
    aria-pressed="false"
    data-popover="Lorem ipsum dolor sit amet consectetur adipisicing elit. Iste dolore quaerat id aliquam, est architecto culpa illum explicabo sapiente reiciendis impedit molestiae libero adipisci autem vitae? Cupiditate vel dicta expedita?"&gt;
    &lt;i&gt; class="bi bi-info-circle-fill fs-5" role="img"
        aria-label="Más información sobre..."&gt;&lt;/i&gt;
&lt;/button&gt;&lt;/pre&gt;
                        </div>
                        <div class="card h-100 overflow-hidden">
                            <div class="card-header">
                                <h4 class="card-title h5 mb-0">CSS</h4>
                            </div>
                            <pre class="card-body text-bg-dark mh-15 mb-0">
/* Popover */

.popover-container [role="status"] {
    display: none;
    position: absolute;
    left: 100%;
    top: 50%;
    transform: translateY(-50%);
    font-size: 0.9rem;
    width: max-content;
    max-width: 25em;
    margin-left: 0.2rem;
    z-index: 1;
}

.popover-container [role="status"] span {
    display: block;
    padding: 0.25rem 0.5rem;
    background: #fff;
    color: #000;
    border-radius: 0.25rem;
    box-shadow: 0 0 3px 0 #00000066;
}

.popover-container [role="status"]::before,
.popover-container [role="status"]::after {
    content: '';
    display: block;
    width: 0;
    height: 0;
    position: absolute;
    right: 100%;
    top: 50%;
    border: 0.25rem solid #fff;
    transform: translate(50%, -50%) rotate(45deg);
}

.popover-container [role="status"]::after {
    box-shadow: 0 0 3px 0 #00000066;
    z-index: -1;
}

.popover-container {
    display: inline-block;
    position: relative;
}

.popover-container.open>[role="status"] {
    display: inline-block;
}</pre>
                        </div>
                        <div class="card h-100 overflow-hidden">
                            <div class="card-header">
                                <h4 class="card-title h5 mb-0">JS</h4>
                            </div>
                            <pre class="card-body text-bg-dark mh-15 mb-0">
// Iterate over them
Array.from(document.querySelectorAll('[data-popover]')).forEach((el) => {
    // Get the message from the data-content element
    var popoverContainer = document.createElement('span');
    popoverContainer.classList.add('popover-container');

    el.after(popoverContainer);
    popoverContainer.append(el);
    popoverContainer.innerHTML += '<span role="status"><span></span></span>';
    el = popoverContainer.querySelector('[data-popover]');

    // Get the live region element
    var liveRegion = popoverContainer.querySelector('[role="status"]').querySelector('span');

    // Toggle the message
    el.addEventListener('click', e => {
        if (popoverContainer.classList.contains('open')) {
            popoverContainer.classList.remove('open');
            liveRegion.innerText = '';
            el.setAttribute('aria-pressed', false);
        } else {
            popoverContainer.classList.add('open');
            window.setTimeout(() => {
                liveRegion.innerText = el.getAttribute('data-popover');
            }, 1);
            el.setAttribute('aria-pressed', true);
        }
    });

    // Close on outside click
    document.addEventListener('click', e => {
        if (!popoverContainer.contains(e.target)) {
            popoverContainer.classList.remove('open');
            liveRegion.innerText = '';
            el.setAttribute('aria-pressed', false);
        }
    });

    // Remove tooltip on ESC
    document.addEventListener('keydown', function (e) {
        if ((e.keyCode || e.which) === 27) {
            popoverContainer.classList.remove('open');
            liveRegion.innerText = '';
            el.setAttribute('aria-pressed', false);
        }
    });
});</pre>
                        </div>
                    </div>
                </div>
                <div class="col col-xl-3"></div>
            </div>
        </div>
    </main>
    <div id="footer"></div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI"
        crossorigin="anonymous"></script>
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"
        integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>
    <script src="custom.js"></script>
</body>

</html>